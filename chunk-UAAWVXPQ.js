import{a as mt}from"./chunk-LLAT74YQ.js";import{a as st}from"./chunk-EWVMNYCX.js";import{a as lt,b as ct,f as pt}from"./chunk-E4BG3XCW.js";import{a as dt,b as gt}from"./chunk-WXE6GEYV.js";import"./chunk-F4QVPDHD.js";import{a as w}from"./chunk-PBFH472O.js";import"./chunk-QCNTN3VJ.js";import"./chunk-44UDCAZB.js";import{b as ut}from"./chunk-5TCMFY44.js";import{$a as s,C as H,Db as it,Fa as _,Fb as x,Gb as c,Hb as b,Ia as q,Ib as nt,Jb as O,Ka as k,La as S,Sb as at,Za as o,_a as r,ab as p,ac as ot,bb as G,bc as N,cb as J,cc as M,eb as C,ec as E,fb as K,fc as y,ga as h,gb as u,ha as f,hb as W,ib as d,lb as X,mb as Y,mc as rt,nb as tt,oc as V,pc as P,ra as Q,sb as v,tb as L,ub as I,va as Z,vb as et,wa as A,xa as a,za as m}from"./chunk-4MXV6QT5.js";var z=class n{constructor(e){this.translate=e}transform(e,t="short"){return new Date(new Date(`${e}T00:00:00`).toLocaleString("en-US",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})).toLocaleString(this.translate.currentLang,{month:t,day:"numeric",year:"numeric"})}static \u0275fac=function(t){return new(t||n)(m(V,16))};static \u0275pipe=q({name:"dateFormat",type:n,pure:!0})};var D=class n{state;onChange=new S;change(e){this.onChange.emit(e.target.checked)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["app-button-activate"]],inputs:{state:"state"},outputs:{onChange:"onChange"},decls:3,vars:4,consts:[[1,"form-check","form-switch"],["type","checkbox","role","switch","id","switchCheckChecked",1,"form-check-input",3,"change","checked","title"]],template:function(t,i){t&1&&(G(0,"div",0)(1,"input",1),c(2,"translate"),W("change",function(g){return i.change(g)}),J()()),t&2&&(a(),K("checked",i.state)("title",b(2,2,i.state?"toggle.button-inactive":"toggle.button-active")))},dependencies:[pt,P],styles:[".form-check-input[_ngcontent-%COMP%]{width:45px;height:20px}"]})};var B=class n{constructor(e){this.app=e}item;totalClicks;onChangeState=new S;switch(e){this.item.state=e,this.onChangeState.emit(this.item)}static \u0275fac=function(t){return new(t||n)(m(w))};static \u0275cmp=_({type:n,selectors:[["app-item-link"]],inputs:{item:"item",totalClicks:"totalClicks"},outputs:{onChangeState:"onChangeState"},decls:24,vars:28,consts:[[1,"row","g-0","gy-3","gy-md-0","p-2","mt-2","container-todo-link"],[1,"col-md-8","d-flex","column-gap-3","container-link"],[1,"container-icon"],["alt","Favicon for url",3,"title","src"],[1,"d-flex","flex-column"],["target","_blank",1,"link","short-link",3,"href","title"],["target","_blank",1,"link","long-link",3,"href","title"],[3,"title"],[1,"bx","bx-calendar-alt"],[1,"text-success","fw-bold"],[1,"col-md-4","d-flex","flex-row","flex-md-column","justify-content-center","align-items-center","align-items-md-end","align-self-center","row-gap-1","column-gap-2"],[3,"textToCopy"],[3,"onChange","state"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),c(4,"translate"),s(),r(5,"div",4)(6,"a",5),c(7,"translate"),v(8),s(),r(9,"a",6),c(10,"translate"),v(11),s(),r(12,"span",7),c(13,"translate"),p(14,"i",8),r(15,"span"),v(16),c(17,"dateFormat"),s()(),r(18,"span",9),v(19),c(20,"translate"),s()()(),r(21,"div",10),p(22,"app-button-copy",11),r(23,"app-button-activate",12),u("onChange",function(g){return i.switch(g)}),s()()()),t&2&&(a(3),o("src",it("https://www.google.com/s2/favicons?domain=",i.item.urlOriginal,"&sz=32"),A)("title",b(4,15,"item-link.info.page-icon")),a(3),o("href",i.app.getUrlShort(i.item.urlShorten),A)("title",b(7,17,"item-link.info.short-link")),a(2),I(" ",i.app.getUrlShort(i.item.urlShorten)," "),a(),o("href",i.item.urlOriginal,A)("title",b(10,19,"item-link.info.long-link")),a(2),I(" ",i.item.urlOriginal," "),a(),o("title",b(13,21,"item-link.info.date-created")),a(4),L(nt(17,23,i.item.date,"long")),a(3),et(" ",b(20,26,"item-link.click")," ",i.totalClicks," "),a(3),o("textToCopy",i.app.getUrlShort(i.item.urlShorten)),a(),o("state",i.item.state))},dependencies:[y,ct,D,z,P],styles:[".container-todo-link[_ngcontent-%COMP%]{border:1px groove;border-radius:8px}.container-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px groove;border-radius:50%;padding:10px}.bx[_ngcontent-%COMP%]{margin-right:6px}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.short-link[_ngcontent-%COMP%]{color:#003ace}.long-link[_ngcontent-%COMP%]{color:#000}.link[_ngcontent-%COMP%]{word-break:break-all;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}"]})};var j=n=>({disabled:n}),vt=n=>({active:n});function _t(n,e){if(n&1){let t=C();r(0,"button",5),u("click",function(){h(t);let l=d(2);return f(l.clickPrevFirst())}),p(1,"i",9),s()}if(n&2){let t=d(2);o("ngClass",x(1,j,t.numberActive===1))}}function kt(n,e){if(n&1){let t=C();r(0,"li",10)(1,"button",11),u("click",function(){let l=h(t).$implicit,g=d(2);return f(g.clickPage(l.number))}),v(2),s()()}if(n&2){let t=e.$implicit;o("ngClass",x(2,vt,t.active)),a(2),I(" ",t.number," ")}}function Ct(n,e){if(n&1){let t=C();r(0,"button",5),u("click",function(){h(t);let l=d(2);return f(l.clickNextLast())}),p(1,"i",12),s()}if(n&2){let t=d(2);o("ngClass",x(1,j,t.numberActive===t.listNumbers.length))}}function St(n,e){if(n&1){let t=C();r(0,"div",1)(1,"ul",2)(2,"li",3),k(3,_t,2,3,"button",4),s(),r(4,"li",3)(5,"button",5),u("click",function(){h(t);let l=d();return f(l.clickPrev())}),p(6,"i",6),s()(),k(7,kt,3,4,"li",7),c(8,"slice"),r(9,"li",3)(10,"button",5),u("click",function(){h(t);let l=d();return f(l.clickNext())}),p(11,"i",8),s()(),r(12,"li",3),k(13,Ct,2,3,"button",4),s()()()}if(n&2){let t=d();a(3),o("ngIf",t.listNumbers.length>t.app.sizePagination),a(2),o("ngClass",x(9,j,t.numberActive===1)),a(2),o("ngForOf",O(8,5,t.listNumbers,t.initial,t.final)),a(3),o("ngClass",x(11,j,t.numberActive===t.listNumbers.length)),a(3),o("ngIf",t.listNumbers.length>t.app.sizePagination)}}var R=class n{constructor(e){this.app=e}lengthList;onChangePage=new S;listNumbers;numberActive=1;initial=0;final=5;ngOnChanges(e){e.lengthList&&this.loadPagination()}loadPagination(){this.listNumbers=[];let e=Math.ceil(this.lengthList/this.app.sizePagination),t=1;for(;t<=e;)this.listNumbers.push({number:t,active:t==1}),t++}clickPage(e){this.numberActive=e,this.listNumbers.forEach(t=>t.active=!1),this.listNumbers.find(t=>t.number===e).active=!0,this.onChangePage.emit(e)}clickPrev(){let e=+this.numberActive.toString().split("").reverse()[0];(e===1||e===6)&&(this.final=this.final-this.app.sizePagination,this.initial=this.final-this.app.sizePagination),this.clickPage(this.numberActive-1)}clickNext(){this.numberActive%this.app.sizePagination===0&&(this.initial=this.initial+this.app.sizePagination,this.final=this.initial+this.app.sizePagination),this.clickPage(this.numberActive+1)}clickPrevFirst(){this.initial=0,this.final=this.app.sizePagination,this.clickPage(1)}clickNextLast(){let e=Math.floor(this.listNumbers.length/this.app.sizePagination);this.initial=e*this.app.sizePagination,this.final=this.initial+this.app.sizePagination,this.clickPage(this.listNumbers.length)}static \u0275fac=function(t){return new(t||n)(m(w))};static \u0275cmp=_({type:n,selectors:[["app-pagination"]],inputs:{lengthList:"lengthList"},outputs:{onChangePage:"onChangePage"},features:[Q],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"pagination","justify-content-center"],[1,"page-item"],["type","button","class","page-link",3,"ngClass","click",4,"ngIf"],["type","button",1,"page-link",3,"click","ngClass"],[1,"bx","bx-chevron-left"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"bx","bx-chevron-right"],[1,"bx","bx-chevrons-left"],[1,"page-item",3,"ngClass"],["type","button",1,"page-link",3,"click"],[1,"bx","bx-chevrons-right"]],template:function(t,i){t&1&&k(0,St,14,13,"div",0),t&2&&o("ngIf",i.listNumbers.length>1)},dependencies:[y,ot,N,M,E],encapsulation:2})};var xt=["modalConfirm"];function yt(n,e){if(n&1){let t=C();r(0,"app-item-link",9),u("onChangeState",function(l){h(t);let g=d();return f(g.changeStateItem(l))}),s()}if(n&2){let t=e.$implicit,i=d();o("item",t)("totalClicks",i.getTotalClicksPerLink(t))}}function Pt(n,e){n&1&&(r(0,"div",10),p(1,"ngx-skeleton-loader",11),s())}function wt(n,e){if(n&1&&(r(0,"div",12)(1,"div",13),p(2,"ng-lottie",14),r(3,"h5"),v(4),c(5,"translate"),s(),r(6,"span"),v(7),c(8,"translate"),s()()()),n&2){let t=d();a(2),o("options",t.options),a(2),L(b(5,3,"links.no-data")),a(3),L(b(8,5,"links.no-data-description"))}}var $=class n{constructor(e,t,i,l,g,T){this.linkService=e;this.app=t;this.translate=i;this.cdRef=l;this.sanitized=g;this.counterService=T;this.final=t.sizePagination}modalConfirm;options={path:"./no-links.json"};listaLinks=[];listaLinksAux=[];listCounter=[];initial=0;final=10;loading=!0;modalOptions={title:"links.modal-inactivate.title",textAccept:"links.modal-inactivate.button-accept",textCancel:"links.modal-inactivate.button-cancel",classBtnAccept:"btn-danger"};ngOnInit(){this.listaLinks=[],H([this.linkService.getData(),this.counterService.getListCounterByUid()]).subscribe({next:([e,t])=>{this.listCounter=t,this.listaLinks=e,this.listaLinksAux=e,this.loading=!1,this.cdRef.detectChanges()},error:e=>{this.loading=!1,console.error("error",e),this.app.toast.error(this.translate.instant("links.error.load-data"))}})}getTotalClicksPerLink(e){return this.listCounter.filter(i=>i.linkId===e.id)[0].datetime.length}changePage(e){this.initial=this.app.sizePagination*e-this.app.sizePagination,this.final=this.app.sizePagination*e}search(e){this.listaLinks=this.listaLinksAux.filter(t=>t.urlOriginal.toLowerCase().includes(e.toLowerCase()))}item;changeStateItem(e){this.item=e,this.setModalOptions(),this.modalConfirm.show()}setModalOptions(){this.modalOptions={title:`links.modal-${this.item.state?"":"in"}activate.title`,textAccept:`links.modal-${this.item.state?"":"in"}activate.button-accept`,textCancel:`links.modal-${this.item.state?"":"in"}activate.button-cancel`,classBtnAccept:this.item.state?"btn-success":"btn-danger"}}getDescription(){if(!this.item)return"";let e;if(this.item.state)e=this.translate.instant("links.modal-activate.description");else{let t=this.translate.instant("links.modal-inactivate.description");e=this.sanitized.bypassSecurityTrustHtml(t)}return e}cancelModal(){this.item.state=!this.item.state}async changeState(){try{let e=`links.alert.${this.item.state?"":"in"}activate`;await this.linkService.updateState(this.item.id,this.item.state),this.modalConfirm.hide(),setTimeout(()=>{alert(this.translate.instant(e))},500)}catch(e){console.error("error",e),this.app.toast.error(this.translate.instant("links.error.change-state"))}}static \u0275fac=function(t){return new(t||n)(m(dt),m(w),m(V),m(at),m(rt),m(gt))};static \u0275cmp=_({type:n,selectors:[["app-links"]],viewQuery:function(t,i){if(t&1&&X(xt,5),t&2){let l;Y(l=tt())&&(i.modalConfirm=l.first)}},decls:12,vars:13,consts:[["modalConfirm",""],[1,"container","py-2"],[3,"onSearch","title"],[3,"item","totalClicks","onChangeState",4,"ngFor","ngForOf"],[3,"onChangePage","lengthList"],["class","item",4,"ngIf"],["class","row g-0 gy-3 gy-md-0 p-2 mt-2 d-flex justify-content-md-center",4,"ngIf"],[3,"onCancel","onAccept","options"],[3,"innerHTML"],[3,"onChangeState","item","totalClicks"],[1,"item"],["count","3","appearance","line","animation","progress"],[1,"row","g-0","gy-3","gy-md-0","p-2","mt-2","d-flex","justify-content-md-center"],[1,"col","col-md-6","col-lg-6"],["width","90%",3,"options"]],template:function(t,i){if(t&1){let l=C();r(0,"div",1)(1,"app-tabbar",2),c(2,"translate"),u("onSearch",function(T){return h(l),f(i.search(T))}),s(),k(3,yt,1,2,"app-item-link",3),c(4,"slice"),p(5,"br"),r(6,"app-pagination",4),u("onChangePage",function(T){return h(l),f(i.changePage(T))}),s(),k(7,Pt,2,0,"div",5)(8,wt,9,7,"div",6),s(),r(9,"app-confirmation-modal",7,0),u("onCancel",function(){return h(l),f(i.cancelModal())})("onAccept",function(){return h(l),f(i.changeState())}),p(11,"span",8),s()}t&2&&(a(),o("title",b(2,7,"links.title-tabbar")),a(2),o("ngForOf",O(4,9,i.listaLinks,i.initial,i.final)),a(3),o("lengthList",i.listaLinks.length),a(),o("ngIf",i.listaLinks.length===0&&i.loading),a(),o("ngIf",i.listaLinks.length===0&&!i.loading),a(),o("options",i.modalOptions),a(2),o("innerHTML",i.getDescription(),Z))},dependencies:[y,N,M,lt,B,R,st,mt,ut,E,P],encapsulation:2})};export{$ as default};
