import{a as P,b}from"./chunk-HP337HJD.js";import"./chunk-36S5GJB5.js";import{a as D}from"./chunk-LXER7YHG.js";import"./chunk-MRXBVRUT.js";import{a as R,c as E}from"./chunk-44UDCAZB.js";import{b as A}from"./chunk-5TCMFY44.js";import{$a as a,A as s,Fa as g,Gb as l,Hb as d,Ka as I,Sb as T,Za as f,_a as o,ab as S,cc as x,fc as y,ib as C,ja as h,lc as w,oc as j,pc as k,sb as p,tb as m,xa as n,za as i}from"./chunk-4MXV6QT5.js";function O(r,t){if(r&1&&(o(0,"div",1)(1,"div",2)(2,"div",3),S(3,"ng-lottie",4),a(),o(4,"div",3)(5,"h1"),p(6),l(7,"translate"),a(),o(8,"p"),p(9),l(10,"translate"),a(),o(11,"span",5),p(12),l(13,"translate"),a()()()()),r&2){let e=C();n(3),f("options",e.options),n(3),m(d(7,4,"redirect.error.title")),n(3),m(d(10,6,"redirect.error.description")),n(3),m(d(13,8,"redirect.error.note"))}}var u=class r{constructor(t,e,c,L,v,B,M,N,_){this.document=t;this.route=e;this.linkService=c;this.cdf=L;this.router=v;this.title=B;this.translate=M;this.counterService=N;this.app=_}options={path:"./invalid-link.json"};url;showError;async ngOnInit(){try{let t=await s(this.route.params);if(!t.id){this.fnShowError();return}let e=await s(this.linkService.getUrlByLinkCorto(t.id));if(e.length===0){this.fnShowError();return}if(!e[0].state){this.router.navigateByUrl("/not-available");return}this.changeTitle("redirect.title-page");let c=this.app.getDate(),v=(await s(this.counterService.getCounterByLinkId(e[0].id)))[0];v.datetime.push(c),await this.counterService.incrementCounter(v),this.url=e[0].urlOriginal,this.goToPage()}catch(t){console.error("error",t),this.fnShowError()}}fnShowError(){this.showError=!0,this.cdf.detectChanges(),this.changeTitle("redirect.error.title-page")}goToPage(){this.document.location.href=this.url}changeTitle(t){setTimeout(()=>{this.title.setTitle(this.translate.instant(t)),this.cdf.detectChanges()},100)}static \u0275fac=function(e){return new(e||r)(i(h),i(R),i(P),i(T),i(E),i(w),i(j),i(b),i(D))};static \u0275cmp=g({type:r,selectors:[["app-redirect"]],decls:1,vars:1,consts:[["class","container py-2",4,"ngIf"],[1,"container","py-2"],[1,"row","g-0","gy-3","gy-md-0","p-2","mt-2","d-flex","flex-column","align-items-md-center"],[1,"col","col-md-8","col-lg-6"],[3,"options"],[1,"form-text"]],template:function(e,c){e&1&&I(0,O,14,10,"div",0),e&2&&f("ngIf",c.showError)},dependencies:[y,x,A,k],encapsulation:2})};export{u as default};
